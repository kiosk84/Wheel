# Fortune Wheel Telegram Bot & Web App

## Описание

Данный проект — это комплексное решение для проведения лотерейной игры «Колесо Фортуны» с помощью Telegram-бота и современного веб-интерфейса. Система позволяет участникам регистрироваться, следить за призовым фондом, участвовать в розыгрышах и получать результаты в реальном времени.

---

## Основные функции

- **Telegram-бот**
  - Приветствие новых пользователей и вывод кнопки с переходом на официальный канал.
  - Регистрация участников через команду и подтверждение оплаты.
  - Админ-функции: подтверждение/отклонение участников, запуск розыгрыша, просмотр истории победителей и призового фонда.
  - Автоматический запуск розыгрыша по расписанию.

- **Веб-интерфейс**
  - Отображение призового фонда, текущих участников, таймера до следующего розыгрыша.
  - Кнопка «Участвовать» с современной анимацией.
  - Визуализация победителя, анимация фейерверка, история победителей.
  - Модальные окна для инструкций и подтверждения оплаты.

---

## Структура проекта

```
├── functions/
│   └── index.js           # Основная логика Telegram-бота и backend (Express, SQLite)
├── index.html             # Веб-интерфейс (React + кастомный JS)
├── README.md              # Описание проекта
└── ...                    # Прочие вспомогательные файлы
```

- **functions/index.js** — реализует Telegram-бота, API для фронтенда, работу с базой данных и бизнес-логику розыгрыша.
- **index.html** — одностраничное приложение (SPA) с React-компонентами, кастомной версткой и стилями.

---

## Технологии
- **Backend:** Node.js, Express, SQLite, telegraf
- **Frontend:** React (через Babel), HTML, CSS (Tailwind + кастомные стили)
- **API:** REST (Express)

---

## Как запустить локально
- Backend (API и бот):
  ```bash
  # в корне репо
  npm install
  npm start        # запустит сервер Express на :8080
  npm run start:bot # запустит Telegram-бота
  ```
- Frontend (Next.js):
  ```bash
  cd frontend
  npm install
  npm run dev      # запустит Next.js на :3000
  ```

---

## Деплой на Railway (backend + бот)
1. Репозиторий подключён к Railway.
2. В **Settings → Variables** указать:
   - BOT_TOKEN
   - ADMIN_ID
   - HOST_URL (https://ваш-backend.up.railway.app)
   - WEBHOOK_PATH (например `/bot`)
3. В **Deploy** нажать **Deploy**.
4. Railway запустит процесс из Procfile:
   ```text
   worker: npm ci --prefix functions && npm start --prefix functions
   ```
5. Проверьте логи в Dashboard — бот и API должны работать.

---

## Деплой фронтенда на Vercel
1. В Vercel создать проект, выбрать папку `frontend`.
2. В **Environment Variables** добавить:
   - NEXT_PUBLIC_API_URL=https://ваш-backend.up.railway.app
3. По умолчанию Vercel соберёт Next.js и раздаст на своём домене.
4. Убедитесь, что API-запросы к `/api/...` проксируются на Railway.

---

## Безопасность и администрирование
- Доступ к админ-командам ограничен по Telegram ID.
- Все действия с участниками и розыгрышами логируются.

---

## Контакты и поддержка
- [Официальный канал Telegram](https://t.me/channel_fortune)
- Для вопросов и предложений — пишите в Issues или на почту разработчика.

---

## Авторство
Разработка и поддержка: @your_nickname (замените на ваш контакт)

---

## Лицензия
MIT License
